services:
  langgraph-ma-intelligence:
    container_name: axiom-langgraph-ma
    build:
      context: .
      dockerfile: Dockerfile.langgraph
    env_file:
      - ../../../.env
    environment:
      # Override specific settings
      - LANGGRAPH_INTERVAL=300
      - SYMBOLS=AAPL,MSFT,GOOGL,TSLA,NVDA
      - POSTGRES_HOST=postgres
      - NEO4J_URI=bolt://neo4j:7687
      - REDIS_HOST=redis
      
    networks:
      - database_axiom_network
    
    restart: unless-stopped
    
    healthcheck:
      test: ["CMD-SHELL", "python -c 'print(\"healthy\")'"]
      interval: 30s
      timeout: 10s
      retries: 3
    
    depends_on:
      - postgres
      - neo4j
      - redis

networks:
  database_axiom_network:
    external: true